<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>23	 ChangeFSI</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME=HEADING6> </A>
<A HREF="E_7.HTM"><IMG ALIGN=BOTTOM SRC="next" WIDTH=69 HEIGHT=24></A> <A HREF="E_5.HTM"><IMG ALIGN=BOTTOM SRC="prev" WIDTH=69 HEIGHT=24></A> <A HREF="../BOOKB/USERGUIDE"><IMG ALIGN=BOTTOM SRC="top" WIDTH=69 HEIGHT=24></A> <A HREF="../BOOKB/TOC.HTM"><IMG ALIGN=BOTTOM SRC="content" WIDTH=69 HEIGHT=24></A> <A HREF="../INDEX/MAIN.HTM"><IMG ALIGN=BOTTOM SRC="index" WIDTH=69 HEIGHT=24></A><P>
RISC OS 3.7 User Guide<P>
<HR>
<A NAME=HEADING6-0> </A>
<H1>23  <A NAME=MARKER-9-1> </A>ChangeFSI<IMG SRC="PICS3/E6IMA118" WIDTH=27 HEIGHT=27>  </H1>
<HR>
ChangeFSI is a useful program for <A NAME=MARKER-2-2> </A>converting and displaying image files of various formats. These images can then be converted into sprites or JPEGs for viewing with RISC OS applications such as !Paint and !Draw.<P>
ChangeFSI stands for 'Change Floyd Steinberg Integer' (<A NAME=MARKER-2-3> </A>ChangeFSI performs Floyd Steinberg error diffusion dithering). <P>
You should make sure that your conversion and subsequent use of an image does not infringe on any copyright that the image may be under.<P>
<A NAME=MARKER-2-4> </A>ChangeFSI can read image data, scale the data to improve an image, change the x and y size, sharpen an image and write the result using error diffusion dithering in one step (so it provides the best possible quality). All operations are carried out with 32-bit fixed-point numbers (three per pixel in the case of a colour picture).<P>
<A NAME=HEADING6-5> </A>
<H2>Starting ChangeFSI</H2>
ChangeFSI is in the Utilities directory on your hard disc or network. To <A NAME=MARKER-2-5> </A>start the application, double-click on the !ChangeFSI icon.<P>
<A NAME=HEADING6-7> </A>
<H2>Using ChangeFSI</H2>
<DL>
<DT><DD>1  Display the directory that contains the file for the image to be processed.<P>
<DT><DD>2  Choose whether to save the image as a sprite or JPEG file.<P>
<DT><DD>3  Change to a desktop screen display mode that you wish to view and store the image in, if you're exporting to a sprite. <P>
</DL>
ChangeFSI automatically converts the file to give the best possible screen image for any display mode. For example, if you choose a 32-thousand colour mode ChangeFSI will produce an image with 32 thousand colours; if you only choose a 16-colour display mode ChangeFSI will produce a 16-colour image - if the colours are nearer to the greys than the colours in the 16-colour palette, it may be that the image is displayed in monochrome on a 16-colour display, but this doesn't mean that the colour information has been lost (unless you save the image as a sprite in that mode).<P>
<DL>
<DT><DD>4  Drag the image file's icon onto the ChangeFSI application on the icon bar.<P>
</DL>
ChangeFSI then attempts to convert the file to give a RISC OS <A NAME=MARKER-2-6> </A>sprite, or a <A NAME=MARKER-2-7> </A>JPEG file, displaying the result.<P>
<B>Note</B></B>: ChangeFSI may not retain transparent sprite pixels during processing. Transparent pixels can be changed to a colour, depending on the screen mode (e.g. transparent pixels in a 16-colour sprite become white in a 256-colour sprite).<P>
<A NAME=HEADING6-15> </A>
<H3> Picture formats</H3>
<A NAME=MARKER-2-8> </A>ChangeFSI can convert many types of images to a sprite or JPEG file. These include the PC graphics formats <A NAME=MARKER-2-9> </A>TIFF, <A NAME=MARKER-2-10> </A>PCX (though not 1 bpp images, which may be converted to blank white sprites), <A NAME=MARKER-2-11> </A>PIC and <A NAME=MARKER-2-12> </A>IMG, the Amiga format <A NAME=MARKER-2-13> </A>IFF, the Compuserv <A NAME=MARKER-2-14> </A>GIF format and the JPEG format (see <A HREF=#MARKER-9-35>page 348</A> for a full list).<P>
ChangeFSI can also convert sprites or JPEGs from one display resolution into another. Be careful, though</B>: every time you recompress a JPEG file it loses some information. Process a file first, and only save it as a JPEG once, right at the end.<P>
There are some JPEG files available which don't conform to the standard convention. Although some of these files are accepted by !ChangeFSI, others will not be. If you find this to be the case try setting the file's type to JPEG (C85) before giving it to !ChangeFSI.<P>
<A NAME=HEADING6-19> </A>
<H3> Additional information</H3>
The information in this chapter gives an overview of how ChangeFSI works from the desktop. Additional information in the form of text files is held within the application. If you want to read these files, shift double-click on !ChangeFSI to open the application directory, then open its Documents directory and double-click on one of the text files</B>:
<P>
<B>Files and what's in them:</B><P><UL>
<LI><B><CODE>CmdBasUse</CODE></B>: Syntax for using ChangeFSI from the command line, and for calling it from BASIC programs.
<LI><B><CODE>DesktopUse</CODE></B>: Instructions for using ChangeFSI from the desktop.
<LI><B><CODE>Formats</CODE></B>: Details of formats that ChangeFSI can use as input or output.
<LI><B><CODE>JPEGInfo</CODE></B>: Standard information about JPEG processing (taken from the Independent JPEG Group's JPEG software).
<LI><B><CODE>Theory</CODE></B>: Theoretical explanation of how ChangeFSI works, likely only to be of interest to advanced users.
<LI><B><CODE>256sprites</CODE></B>: Information for programmers about creating, recognising and displaying a sprite with a 256-entry palette.</UL>
<P>
<A NAME=HEADING6-21> </A>
<H3> A couple of hints on memory usage</H3>
<A NAME=MARKER-2-15> </A>If you're short on memory, Drag the <B>Next</B> slot (in the Tasks display window) down to 320k. If you're converting wide images (e.g. PhotoCD images up to 3072 pixels wide) increase the <B>Next</B> slot to 500k or more.<P>
<P>
<A NAME=HEADING6-24> </A>
<H2>Icon bar menu options</H2>
This section tells you how to use ChangeFSI's menu options.<P>
<A NAME=HEADING6-26> </A>
<H3> Scaling options</H3>
The <B>Scaling</B> options set which scale factor you wish to apply to your image. You can also transform, rotate or mirror the image.<P><IMG SRC="PICS3/E6IMA119" WIDTH=351 HEIGHT=146>  <P>
<B>Scale 1:1 1:1</B> gives a full-sized image (the same dimensions as the original). The other <B>Scale</B> options set different preset scaling ratios.<P>
<B>Custom</B> gives you finer control over the size of the output image. You can either set your own scaling ratio by filling in all four boxes, or you can set the size in pixels by filling in the left <B>x</B> and <B>y</B> boxes only, leaving the right boxes blank.<P>
<B>Scale to fill</B> scales the image so that it covers the entire screen area at the current display resolution; this may distort the aspect ratio.<P>
<B>Ignore source pixel size</B> ignores any source information about the pixel size. This can be useful if you have images that use a non-standard pixel size. The pixels are all considered to be square.<P>
<B>Ignore pixel aspect</B> ignores all the size information in the source file. Both source and output pixels are considered to be square.<P>
<B><A NAME=MARKER-2-16> </A>Lock picture aspect </B>prevents the Scale to fill and Custom options from stretching the image horizontally or vertically. The output image will fit within the size you specified; it may be smaller than you asked in one direction only, to avoid changing its aspect ratio.<P>
<B><A NAME=MARKER-2-17> </A>Rotate</B> can shift an image through 90° (+90 is anticlockwise).<P>
<B>Mirror</B> performs left/right and up/down mirror operations on an image. <P>
If you select Rotate <B>and</B> Mirror, the rotation is performed first.<P>
<A NAME=HEADING6-37> </A>
<H3> Processing options</H3>
The <A NAME=MARKER-2-18> </A>Processing options control the image processing used in the conversion and display of the image. You'll notice that all of these options are 'off' by default; you will not normally need to change these settings.<P><IMG SRC="PICS3/E6IMA120" WIDTH=351 HEIGHT=131>  <P>
<B>Expand <A NAME=MARKER-2-19> </A>dynamic range</B> will expand the range of colours in the image. This normally brightens the image. It expands the dynamic range of a picture to full scale.<P>
<B><A NAME=MARKER-2-20> </A>Histogram equalisation</B> will most often result in a worse picture but it can be used to recover detail from an otherwise useless image. Alternatively you can use it to look at information locked in a small part of the input scale.<P>
<B>Disable <A NAME=MARKER-2-21> </A>dithering</B> will disable Floyd-Steinberg dithering. This will usually result in an inferior image.<P>
<B>Invert input</B> will result in your colour images having their colours inverted. Black and white images are also inverted.<P>
<B>Brighten picture</B> will produce a picture that is slightly brighter than it should be. Useful if you have dark pictures. This option only works with monochrome pictures. <P>
<B><A NAME=MARKER-2-22> </A>Black correction</B> is useful if you want to print the image on a laser printer. You should use a number between zero and 128, though values between 32 and 64 usually give the best result; experiment. Images treated in this way will give a poor result when viewed on screen. This only works for 1bpp (black and white) output.<P>
<B><A NAME=MARKER-2-23> </A>Gamma correction</B> is used to correct the image quality as displayed on your monitor. Low values of gamma (0 to 1) make colours darker and high values (above 1) make them lighter. Gamma correction is most often used to correct images that have been scanned in with a scanner. Different monitors may need different Gamma Corrections. A standard value is 2.2 (TV industry standard).<P>
<B><A NAME=MARKER-2-24> </A>Pre-sharpening</B> is used to sharpen the edges of objects in the image. Values between 10 and 20 can be used to sharpen an image. Values between 20 and 30 can be used to compensate for the blurring introduced by the dithering process.<P>
For example, a value of 24 will counteract the general dither blurring. A value of 20 is noticeably sharp. All values from 1 to 99 can be selected.<P>
<B><A NAME=MARKER-2-25> </A>Smoothing</B> does the reverse of sharpening; it smoothes the edges of objects in the image. You can use values between 1 and 23, with low values giving the most smoothing. Values between 1 (the default) and 3 can be used to blur an image. Values between 3 and 10+ can be used to reduce noise in an image.<P>
<A NAME=HEADING6-49> </A>
<H3> <A NAME=MARKER-9-26> </A>Output options<A NAME=MARKER-2-27> </A></H3>
The Output options control output to JPEG, or the screen mode in which sprites are created.<P>
<A NAME=HEADING6-51> </A>
<H4> Sprite Output options</H4>
To output an image in sprite format, choose <B>Sprite Output</B> from the icon bar menu and set up the output options</B>:<P><IMG SRC="PICS3/E6IMA121" WIDTH=351 HEIGHT=141>  <P>
<B>Colour</B> gives an image in <A NAME=MARKER-2-28> </A>colour.<P>
<B>Monochrome</B> gives an image in shades of grey.<P>
<B>Special</B> allows the use of special file suffixes. These are the same as the <CODE>&lt;mode&gt;</CODE> parameter described in the on-line documentation file <CODE>CmdBasUse</CODE>.<P>
<B>Use current mode</B> outputs the image for display in the current desktop Display manager mode.<P>
<B>Old <A NAME=MARKER-2-29> </A>mode</B> allows you to output the image for display in an old-type screen mode</B>:<P>
Enter a backward-compatible screen mode number. We don't recommend that you use this method (it is overridden if you set a colour mode and then use the <B>Monochrome</B> button). <P>
The<B> Mode</B> number is only useful in old-type screen modes. It's an information box (you can't enter anything into it). When Use current mode is selected, the mode number generated with new style screen displays has no significance.<P>
<B>Colours</B></B>: The two rows of <B>2</B>, <B>4</B>, <B>16</B>, <B>256</B>, <B>32K</B> and <B>16M </B>buttons set the number of colours in the output image. The top row beside the square box chooses a square pixel mode, and the lower row beside the oblong box chooses a non-square (90 x 45dpi) screen mode. For monochrome output the <B>2</B>, <B>4</B>, <B>16</B> and <B>256</B> buttons set 2, 4, 8 and 16 greys respectively, and you cannot use the <B>32K</B> and <B>16M </B>buttons.<P>
<A NAME=HEADING6-61> </A>
<H4> JPEG Output options</H4>
To output an image in JPEG format, choose<B> <A NAME=MARKER-2-30> </A>JPEG Output</B> from the icon bar menu and set up the output options</B>:<P><IMG SRC="PICS3/E6IMA122" WIDTH=351 HEIGHT=115>  <P>
<B>Colour</B> gives an image in colour.<P>
<B>Monochrome</B> produces a monochrome image.<P>
<B>Quality </B>can take any value from 0 to 100 and is passed to the JPEG compression code. The default value is 75, but you can change this using <B>Save choices</B>. The default value gives a sensible compromise between quality and compression.<P>
<A NAME=HEADING6-66> </A>
<H3> Reprocess</H3>
This option reprocesses the file according to any new options you may have set.<P>
<A NAME=HEADING6-68> </A>
<H3> Fast</H3>
This option speeds up the processing of the image by blanking the screen during processing. If there is no benefit to be had from doing this, the option will be greyed out.<P>
<A NAME=HEADING6-70> </A>
<H3> Save Choices</H3>
This option will save any changes you have made to the ChangeFSI options so that you can use these options as your default options next time you run ChangeFSI.<P>
<A NAME=HEADING6-72> </A>
<H3> Quit</H3>
This quits the application, removing it from the icon bar.<P>
<A NAME=HEADING6-74> </A>
<H2> <A NAME=MARKER-9-31> </A>Image menu options </H2>
<IMG SRC="PICS3/E6IMA123" WIDTH=72 HEIGHT=78>  Once your <A NAME=MARKER-2-32> </A>image has been produced you can press Menu over the image to display a menu of information about the input and output images.<P>
<B>Image Info</B> gives the information about the output file.<P>
<B>Source Info</B> gives the information about the source file.<P>
<B>Range Info</B> gives you information about the dynamic range of the image.<P>
<B><A NAME=MARKER-2-33> </A>Zoom</B> allows you to change the magnification of the image. This is not the same as scaling the source image.<P>
<B><A NAME=MARKER-2-34> </A>Save image </B>allows you to save the image as a Sprite file or JPEG file (this depends on the setting in <B>Output Options</B> - see <A HREF=#MARKER-9-26>page 346</A>).<P>
<B>Reprocess</B> allows you to process the image again using any options you have changed on the main menu.<P>
<A NAME=HEADING6-82> </A>
<H2> <A NAME=MARKER-9-35> </A>Image file conversion</H2>
ChangeFSI will convert any of the following image formats into the sprite or JPEG format. You can choose the type of RISC OS sprite that is created by setting the <B>Output Options</B>. If no special output mode is chosen, ChangeFSI produces a sprite that is compatible with the current display mode.
<P>
<B>Image types and how to recognise them:</B><P><UL>
<LI><B>RISC OS sprites</B>: file type FF9
<LI><B>ArVis 15-bit HIP + LOP sprites</B>: file type FF9, and file is beneath a HIP directory, and a similar LOP file exists
<LI><B>Watford digitiser pictures, 512x256, 64 greys -</B>: file type DFA
<LI><B>and triple red, green, blue separations</B>: directory of type DFA files named RED, GREEN and BLUE
<LI><B>ProArtisan compressed pictures, 640x256, 256 colours</B>: file type DE2
<LI><B>JPEG 'JFIF' files</B>: file type C85, or 'JFIF' in file
<LI><B>Kodak PhotoCD images</B>: file type BE8, or file's name ends /PCD
<LI><B>TimeStep satellite images, 800x800, 256 greys</B>: file type 7A0
<LI><B>PC TGA images</B>: file type 69D, or file's name ends with TGA or VDA
<LI><B>MTV 24-bit PIC images</B>: file type 699, or file is beneath a PIC directory
<LI><B>QRT 24-bit RAW images</B>: file type 698, or file's name is RAW
<LI><B>ZSoft .PCX files</B>: file type 697, or &amp;0A,&amp;00|02|03|04|05,&amp;01 at start of file, or file is beneath a PCX directory, or file's name ends /PCX
<LI><B>Degas PI1, PI2, PI3 images</B>: file type 691
<LI><B>!Translator Clear format files</B>: file type 690
<LI><B>CCIR 601 4</B>:2</B>:2 images</B>: file type 601
<LI><B>!RayShade 'RGB' images</B>: file type 371
<LI><B>TimeStep satellite images, 128x256, 256 greys -</B>: file type 300
<LI><B>and triple red, green, blue separations</B>: directory of type 300 files named RED, GREEN and BLUE
<LI><B>Wild Vision Hawk V12, 512x512, 256 greys</B>: file type 006
<LI><B>AIM/Wild Vision Hawk V10, 256x256, 256 greys</B>: file type 004
<LI><B>Wild Vision/Hawk V9, 256x256, 24 bit triple image</B>: directory of type 004 files named RED, GREEN and BLUE
<LI><B>Wild Vision Hawk V9, 51x2256, 12-bit colour</B>: 'MercSoft' or 'SnapShot' at start of file
<LI><B>Wild Vision Hawk V9 Mk II, 16-bit colour</B>: 'MercSof1' at start of file
<LI><B>Pineapple 16 bit per pixel images</B>: 'FSIfile' at start of file
<LI><B>FITS astronomical format images</B>: 'SIMPLE  ' at start of file
<LI><B>Irlam Instruments YUV 411 files</B>: 'IRLAM YUV 411' at start of file
<LI><B>Irlam Instruments 24-bit files</B>: 'Irlam' at start of file
<LI><B>Windows 3 .BMP files</B>: 'BM' at start of file; or 'RIFF' at start of file, and 'RDIBdata' and 'BM' in file
<LI><B>Compuserve's GIF files up to 8 bit per pixel</B>: 'GIF8' at start of file
<LI><B>.PIC 8 bit per pixel files</B>: 'AV_VO' at start of file
<LI><B>Sun 'pixrect' raster files</B>: &amp;956AA659 at start of file
<LI><B>GEM .IMG images</B>: &amp;08000100 at start of file, or file is beneath an IMG directory, or file's name ends /IMG
<LI><B>Apollo GPR 16-colour images</B>: &amp;01000100 at start of file
<LI><B>RIX Softworks ColoRIX 8 bit per pixel files</B>: 'RIX3' at start of file
<LI><B>TIFF pictures</B>: 'II*null' or 'MMnull*' at start of file
<LI><B>UNIX rle format files</B>: &amp;CC52 at start of file
<LI><B>Portable Bit Map (pbm) binary encoded formats</B>: 'P4', 'P5' or 'P6' at start of file
<LI><B>ChangeFSI packed portable bitmaps</B>: 'P15' at start of file
<LI><B>PocketBook I and II PIC format files</B>: 'PIC' at start of file
<LI><B>Electronic Art's IFF ILBM pictures</B>: 'FORM' at start of file and 'ILBM' in file
<LI><B>MILLIPEDE PRISMA, 768x576, 8-bit colour images</B>: 'MILLIPEDE' in file
<LI><B>MacPaint files, 576x720, 1 bit per pixel</B>: 'PNTG' in file
<LI><B>MacPICT2 v2 8 and 24/32 bit per pixel</B>: &amp;00,&amp;11,&amp;02,&amp;FF,&amp;0C,&amp;00,&amp;FF,&amp;FE in file
<LI><B>RT 24-bit run length coded IMAGE files</B>: file is beneath an IMAGE directory
<LI><B>PC EGA .DSP images, 640x350, 16 colours</B>: file is beneath a DSP directory, or file's name ends /DSP
<LI><B>Kodak RGB images, 24 bits per pixel</B>: file's name ends /RGB</UL>
<P>
<B>Note</B></B>: If you get a 'Number to big' error message while trying to display a TIFF file, or 'Division by zero' with an IFF file, then try setting the 'Ignore source pixel size' and/or 'Ignore pixel size' options. Also try setting these options if the proportions of an image (for example from an IMG file) are not what you expect.<P>
<A NAME=HEADING6-85> </A>
<H4> </H4>
<!-- TOC -->

<HR>
<ADDRESS>RISC OS 3.7 User Guide - 22 JAN 1997</ADDRESS>
<A HREF="E_7.HTM"><IMG ALIGN=BOTTOM SRC="next" WIDTH=69 HEIGHT=24>  </A> <A HREF="E_5.HTM"><IMG ALIGN=BOTTOM SRC="prev" WIDTH=69 HEIGHT=24>  </A> <A HREF="../BOOKB/USERGUIDE"><IMG ALIGN=BOTTOM SRC="top" WIDTH=69 HEIGHT=24>  </A> <A HREF="../BOOKB/TOC.HTM"><IMG ALIGN=BOTTOM SRC="content" WIDTH=69 HEIGHT=24>  </A> <A HREF="../INDEX/MAIN.HTM"><IMG ALIGN=BOTTOM SRC="index" WIDTH=69 HEIGHT=24>  </A><P>
</BODY>
</HTML> 




