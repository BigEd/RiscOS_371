<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>Appendix&nbsp;G</B>:  Removing a disc defect</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME=HEADING20> </A>
<A HREF="BOOK3_24.H"><IMG ALIGN=BOTTOM SRC="next" WIDTH=69 HEIGHT=24></A> <A HREF="BOOK3_17.H"><IMG ALIGN=BOTTOM SRC="prev" WIDTH=69 HEIGHT=24></A> <A HREF="../BOOKB/USERGUIDE"><IMG ALIGN=BOTTOM SRC="top" WIDTH=69 HEIGHT=24></A> <A HREF="../BOOKB/TOC.HTM"><IMG ALIGN=BOTTOM SRC="content" WIDTH=69 HEIGHT=24></A> <A HREF="../INDEX/MAIN.HTM"><IMG ALIGN=BOTTOM SRC="index" WIDTH=69 HEIGHT=24></A><P>
RISC OS 3.7 User Guide<P>
<HR>
<A NAME=HEADING20-0> </A>
<H1>Appendix G</B>:  <A NAME=MARKER-9-1> </A>Removing a disc defect</H1>
<HR>
This appendix shows you how to map out a <A NAME=MARKER-2-2> </A>defect in your hard disc. You can still use your hard disc without using the part of the disc that contains the defect.<P>
<A NAME=HEADING20-2> </A>
<H2> What is a defect?</H2>
If you are using your hard disc and see an <A NAME=MARKER-2-3> </A>error message such as</B>:<P>
Disc error 08 at </B>:4/0001040<P>
then you have found a disc defect.<P>
You might also find a disc defect if you are Verifying your disc.<P>
<A NAME=HEADING20-7> </A>
<H2> Removing a defect</H2>
Assuming that you see an error message such as</B>:<P>
Disc error 08 at </B>:4/0001040<P>
write it down. The last number is the disc address.<P>
<DL>
<DT><DD>1  At the command line type *Defect, the disc name and the last part of the disc address</B>:<P>
</DL>
 *Defect HardDisc4 1040<P>
<DL>
<DT><DD>2  If this section of disc is in use you will see a message such as</B>:<P>
</DL>
 .myfile1 has defect at offset 800  <P>.myfile2 must be moved<P>
<DL>
<DT><DD>3  Try to copy these files to another part of the disc (into another directory) and delete the originals. The affected part of the disc is now unallocated.<P>
<DT><DD>4  At the command line type the *Defect command again</B>:<P>
</DL>
 *Defect HardDisc4 1040<P>
The affected part of the disc is now made inaccessible.<P>
<P>
<A NAME=HEADING23-0> </A>
<H2>Technical Details</H2>
<HR>
<H1> <A NAME=MARKER-9-4> </A>*Defect</H1>
<HR>
Reports what object contains a <A NAME=MARKER-2-5> </A>defect, or (if none) <A NAME=MARKER-2-6> </A>marks the defective part of the disc so it will no longer be used.<P>
<A NAME=HEADING23-2> </A>
<H3> Syntax</H3>
*Defect <CODE>disc_spec</CODE> <CODE>disc_addr</CODE><P>
<A NAME=HEADING23-4> </A>
<H3> Parameters</H3>
<P>
disc_spec</B>: the name of the disc or number of the disc drive
<P>
disc_addr</B>: the hex disc address where the defect exists, which must be a multiple of the sector size (512 for IDE drives; 1024 for floppies) - that is, must end in '00'.
<P>
<A NAME=HEADING23-5> </A>
<H3> Use</H3>
<A NAME=MARKER-2-7> </A>*Defect reports what object contains a defect, or (if none) marks the defective part of the disc so it will no longer be used. *Defect is typically used after a disc error has been reported, and the *Verify command has confirmed that the disc has a physical defect, and given its disc address.<P>
If the defect is in an unallocated part of the disc, *Defect will render that part of the disc inaccessible by altering the 'map' of the disc.<P>
If the defect is in an allocated part of the disc, *Defect tells you what object contains the defect, and the offset of the defect within the object. This may enable you to retrieve most of the information held within the object, using suitable software. You must then delete the object from the defective disc. *Defect may also tell you that some other objects must be moved</B>: you should copy these to another disc, and then delete them from the defective disc. Once you have removed all the objects that the *Defect command listed, there is no longer anything allocated to the defective part of the disc; so you can repeat the *Defect command to make it inaccessible.<P>
Sometimes the disc will be too badly damaged for you to successfully delete objects listed by the *Defect command. In such cases the damage cannot be repaired, and you must restore the objects from a recent backup.<P>
<A NAME=HEADING23-10> </A>
<!-- TOC -->

<HR>
<ADDRESS>RISC OS 3.7 User Guide - 20 JAN 1997</ADDRESS>
<A HREF="BOOK3_24.H"><IMG ALIGN=BOTTOM SRC="next" WIDTH=69 HEIGHT=24></A> <A HREF="BOOK3_17.H"><IMG ALIGN=BOTTOM SRC="prev" WIDTH=69 HEIGHT=24></A> <A HREF="../BOOKB/USERGUIDE"><IMG ALIGN=BOTTOM SRC="top" WIDTH=69 HEIGHT=24></A> <A HREF="../BOOKB/TOC.HTM"><IMG ALIGN=BOTTOM SRC="content" WIDTH=69 HEIGHT=24></A> <A HREF="../INDEX/MAIN.HTM"><IMG ALIGN=BOTTOM SRC="index" WIDTH=69 HEIGHT=24></A><P>
</BODY>
</HTML> 