<!-- Generated by Harlequin WebMaker 2.2.3 (23-Apr-1996)
LispWorks 3.2.2 -->
<HTML> <HEAD>
<TITLE>3	 Customising the desktop  start-up procedure</TITLE>
</HEAD>
<BODY bgcolor="#ffffff">
<A NAME=HEADING5> </A>
<A HREF="BOOK_6.HTM"><IMG ALIGN=BOTTOM SRC="next" WIDTH=69 HEIGHT=24></A> <A HREF="BOOK_4.HTM"><IMG ALIGN=BOTTOM SRC="prev" WIDTH=69 HEIGHT=24></A> <A HREF="USERGUIDE"><IMG ALIGN=BOTTOM SRC="top" WIDTH=69 HEIGHT=24></A> <A HREF="TOC.HTM"><IMG ALIGN=BOTTOM SRC="content" WIDTH=69 HEIGHT=24></A> <A HREF="../INDEX/MAIN.HTM"><IMG ALIGN=BOTTOM SRC="index" WIDTH=69 HEIGHT=24></A><P>
RISC OS 3.7 User Guide<P>
<HR>
<A NAME=HEADING5-0> </A>
<H1>3    <A NAME=MARKER-9-12> </A>Customising the desktop  start-up procedure</H1>
<HR>
This chapter explains how to control the processes between switch-on and the time when you can start working. These processes are started and controlled by the !Boot application.<P>
<A NAME=MARKER-2-13> </A>On <A NAME=MARKER-2-14> </A>hard disc machines, the <A NAME=MARKER-2-15> </A>!Boot application is always stored in the root directory. Click on the hard disc icon and you will see it. (On network systems, it is known as !ArmBoot or !ShareBoot.)<P>
<B>Never move or delete !Boot; your computer may not work if you do!</B><P>
There are two ways of modifying the start-up procedure</B>:<P>
<UL>

<LI>Saving a <A NAME=MARKER-2-16> </A>Desktop boot file (or modifying an existing one by hand)<P>

<LI>Changing the contents of !Boot by hand.<P>
</UL>
<A NAME=HEADING5-7> </A>
<H2> <A NAME=MARKER-9-17> </A>Desktop boot files</H2>
<IMG SRC="PICS3/BO5IM146" WIDTH=28 HEIGHT=27>  You can use a Desktop boot file to save your current working environment - the desktop - so that when you next <A NAME=MARKER-2-18> </A>switch on the computer you will see the same desktop again.<P>
A <A NAME=MARKER-2-19> </A>Desktop boot file remembers <P>
<UL>

<LI>which applications are running on the icon bar<P>

<LI>any changes made to running applications (e.g. default font, window size)<P>

<LI>the Pinboard and backdrop layout<P>

<LI>any network connections<P>

<LI>any system configuration changes (specifically, the current RAM disc size, Font cache and System sprite allocations - see <A HREF=BOOK_6.HTM#MARKER-9-32>page 63</A>).<P>
</UL>
For instance you could automatically start up Edit and Alarm, and then log onto your file server, each time you switch on.<P>
The following sections shows you how to make a Desktop boot file, and modify it to include your own commands and scripts.<P>
<A NAME=HEADING5-17> </A>
<H3> <A NAME=MARKER-9-20> </A>Setting up a Desktop boot file</H3>
<IMG SRC="PICS3/BO5IM147" WIDTH=29 HEIGHT=25>  Before you actually save a <A NAME=MARKER-2-21> </A>Desktop boot file, follow these steps</B>:<P>
<DL>
<DT><DD>1  Make a list of exactly what you want your Desktop boot file to do.<P>
<DT><DD>2  Save any files you are working on.<P>
<DT><DD>3  Delete any existing Desktop boot files (see <A HREF=#MARKER-9-36>page 54</A>).<P>
<DT><DD>4  <A NAME=MARKER-2-22> </A>Shutdown and then switch off your computer (see <A HREF=BOOK_6.HTM#MARKER-9-46>page 67</A>) then switch it back on again.<P>
<DT><DD>5  Set up your desktop as you want it to look when you switch on. This might include<P>
<UL>

<LI>starting one or more applications<P>

<LI>opening one or more directory displays<P>

<LI>loading a printer driver<P>

<LI>logging on to a network.<P>
</UL>
</DL>
<B>Notes</B><P>
It is important that you do not do anything that you don't want to have in your Desktop boot file, as otherwise your Desktop boot file stores unwanted instructions. In particular</B>:<P>
<UL>

<LI>If you want to change the name of your hard disc, do so <B>before</B> saving a Desktop boot file.<P>

<LI>Don't use the Task manager Task display window to change any configuration options before you save your Desktop boot file. If you want to change some of the configuration options it may be better to change them permanently using !Boot before you save your desktop boot file (see <A HREF=BOOK_4.HTM#MARKER-9-67><I>Changing the computer's configuration</I> on page 31</A>).<P>

<LI>If there's a floppy disc in the disc drive, dismount it. If you don't, the computer will ask you to insert it every time you switch on.<P>
</UL>
<A NAME=HEADING5-33> </A>
<H3> <A NAME=MARKER-9-24> </A>Saving a Desktop boot file</H3>
Once you have a desktop layout on your screen that you would like to use each time you start your computer, you can save the layout</B>:<P>
<DL>
<DT><DD>1  <IMG SRC="PICS3/BO5IM148" WIDTH=22 HEIGHT=33>  Press Menu over the <A NAME=MARKER-2-25> </A>Task manager icon and display the <A NAME=MARKER-2-26> </A>Desktop boot/Save boot file</B>: dialogue box</B>:<P><IMG SRC="PICS3/BO5IM149" WIDTH=351 HEIGHT=120>  <P>
<DT><DD>2  Save the file by clicking on <B>OK. Don't change the path name given in the Save box</B>.<P>
</DL>
Now, each time you switch on or reset your computer, the Desktop boot file is used to start up and display the desktop in exactly the way it looked when you saved the Desktop boot file.<P>
<B>Note for <A NAME=MARKER-2-27> </A>network users</B></B>: You can drag the <B>Save as</B> icon to your User Root directory on a Level 4 Fileserver (rename the file to <CODE><A NAME=MARKER-2-28> </A>!ArmBoot</CODE>) or a writable directory on an Acorn Access network (you can give the file any valid RISC OS filename).<P>
<A NAME=HEADING5-39> </A>
<H3> Things to bear in mind</H3>
<A NAME=HEADING5-40> </A>
<H4> Desktop boot file overriding the <A NAME=MARKER-2-29> </A>CMOS RAM settings</H4>
When you run a Desktop boot file, it may be set to override some CMOS RAM settings in the !Boot configuration application. This can cause confusion. If you have saved a Desktop boot file and then change these parameters using !Boot configuration, the changes don't have any effect. This is due to the Desktop boot file overriding !Boot's settings. The following settings are affected</B>:<P>
<UL>
<UL>

<LI><A NAME=MARKER-2-30> </A>Font cache size<P>

<LI>Sprite cache size<P>

<LI><A NAME=MARKER-2-31> </A>RAM disc size.<P>
</UL>
</UL>
If you're not changing these settings, delete them from your Desktop boot file so that changes you make using !Boot configuration are used correctly.<P>
<A NAME=HEADING5-46> </A>
<H4> Pre RISC OS 3 <A NAME=MARKER-2-32> </A>applications</H4>
Applications written before RISC OS 3 was released cannot automatically be saved using the <A NAME=MARKER-2-33> </A>Desktop boot option in this way. However, you can still add lines to your Desktop boot file by hand to start such applications automatically. <P>
For example, the following line runs the application <I>!OldApp</I>.<P>
<B>Run adfs</B>:</B>:HardDisc4.$.!OldApp</B><P>
<A NAME=HEADING5-50> </A>
<H4> Changing the name of your <A NAME=MARKER-2-34> </A>hard disc </H4>
When you create a Desktop boot file, the file includes the name of the hard disc. If you rename your hard disc, the Desktop boot file may cease to work unless you edit or reconstruct it.<P>
<A NAME=HEADING5-52> </A>
<H4> Moving applications</H4>
If you use the Desktop boot file to load <A NAME=MARKER-2-35> </A>applications, you must not move those applications to a different directory unless you also change the Desktop boot file to reflect the changes. If the Desktop boot file cannot find an application or file it simply ignores the instruction and continues.<P>
<A NAME=HEADING5-54> </A>
<H4> NFS Filer - Desktop saving</H4>
If you have applications in the root directory of an NFS mount which you want to store in a Desktop boot file, edit the saved desktop boot file to remove the Filer_Boots of those applications, or move them after the line where the mount is mounted. This ensures that the NFS mount is present when these applications are Filer_Booted.<P>
<A NAME=HEADING5-56> </A>
<H3> <A NAME=MARKER-9-36> </A>Deleting a Desktop boot file</H3>
If you've created a <A NAME=MARKER-9-37> </A>Desktop boot file that you no longer want, go to the directory<P>
ADFS</B>:</B>:HardDisc4.$.!Boot.Choices.Boot.Tasks<P>
and delete the !Boot file that is in that directory.<P>
<A NAME=HEADING5-60> </A>
<H3> <A NAME=MARKER-9-38> </A>Inside the Desktop boot file</H3>
<IMG SRC="PICS3/BO5IM150" WIDTH=27 HEIGHT=27>  It is fairly easy to inspect and edit your <A NAME=MARKER-2-39> </A>Desktop boot file.<P>
The Desktop boot file is stored in the following file</B>:<P>
ADFS</B>:</B>:HardDisc4.$.!Boot.Choices.Boot.Tasks.!Boot<P>
<B>Remember</B></B>: To view the contents of an application directory such as !Boot, hold down the Shift key when you double-click on the application. <P>
To view the Desktop boot file, start !Edit and then drag the Desktop boot icon onto the Edit application icon on the icon bar.<P>
This section looks at the typical lines found in a<A NAME=MARKER-2-40> </A> Desktop boot file. You don't need to know these details to <B>use</B> a Desktop boot file, but an understanding may be useful if you decide to <B>edit</B> your Desktop boot file. To look at a Desktop boot file, drag the boot file icon from the <B>Save boot file</B> box to the Edit icon.<P>
The following example uses typical entries and values; however these may be different (or not present at all) on your computer. Note that entries usually appear on <B>one</B> line in the Desktop boot file.
<P><B>Line in Desktop boot file and action to be taken:</B><UL>
<LI><B><A NAME=MARKER-2-1> </A>WimpSlot -next 640K</B>: Allocates memory to the next application, usually 640KB.
<LI><B>ChangeDynamicArea <UNDERLINE>-</UNDERLINE>FontSize 32K <P>ChangeDynamicArea <UNDERLINE>-</UNDERLINE>SpriteSize 0K
<P>ChangeDynamicArea <UNDERLINE>-</UNDERLINE>RamFsSize 0K
<P>(Note: 3 separate lines.)</B> Reserves <A NAME=MARKER-2-2> </A>memory for Fonts, Sprite cache and RAM disc. Task manager changes are saved here and override !Boot configuration window settings.
<LI><B><A NAME=MARKER-2-3> </A>ColourTransLoadings &amp;2 &amp;4 &amp;1</B>: Gives colour balance used by the desktop. Don't change this.
<LI><B><A NAME=MARKER-2-4> </A>net:logon :Business Mart</B>: Logs user Mart onto file server 'Business', and prompts for password.
<LI><B><A NAME=MARKER-2-5> </A>Filer_OpenDir adfs::HardDisc4.$  2 712 712 188 <UNDERLINE>-</UNDERLINE>sn <UNDERLINE>-</UNDERLINE>si</B>: Displays root <A NAME=MARKER-2-6> </A>directory of HardDisc4. Four numbers define size and position in OS units. Following parameters define display format</B>: -li large icons -si small icons -fi full info -sn sort by name -st sort by type -ss sort by size -sd sort by date
<LI><B><A NAME=MARKER-2-7> </A>Filer_Boot adfs::HardDisc4.$.Apps.!SciCalc</B>: Runs an application's boot file, storing its location and sprite in memory. Adding Filer_Boot lines for files in frequently-used directories speeds up opening these directories the first time, but makes starting up or resetting the computer take longer.
<LI><B><A NAME=MARKER-2-8> </A>RMEnsure VProtect 0 RMLoad System:Modules.VProtect</B>: Runs the virus protection module VProtect. Helps protect your system against viruses. See your <I>Welcome Guide</I> for more information.
<LI><B>Pinboard Backdrop <UNDERLINE>-</UNDERLINE>T ADFS::HardDisc4 .$.!Boot.Resources.Configure. Textures.T6</B>: Starts Pinboard and displays chosen desktop backdrop.<P><B><A NAME=MARKER-9-9> </A>Note</B></B>: If loading one of your own sprites as a backdrop, specify <B>None</B> in !Boot's Screen window (see <A HREF=BOOK_4.HTM#MARKER-9-97>page 40</A>).
<LI><B>Run adfs::HardDisc4.$.Apps.!SciCalc</B>: Starts SciCalc. You can run any application in this way.
<LI><B>Set <A NAME=MARKER-2-11> </A>Edit$Options F13 B1 W8 H12 NTrinity.Medium</B>: Sets up configuration options for Edit (options are saved automatically in a Desktop boot file). See <A HREF="../Book3b/BOOK3_6.HT#HEADING6-0"><I>Configuring applications</I> on page 427</A>.<P>You can store configuration options without loading applications.</UL>
<P>
<A NAME=HEADING5-68> </A>
<H4> <A NAME=MARKER-9-41> </A>Commenting out lines in a Desktop boot file</H4>
If you don't want the computer to run an application on start-up, you can <A NAME=MARKER-2-42> </A>comment out the relevant line in the Desktop boot file by typing a | character at the beginning. This is simpler than saving a whole new Desktop boot file; you can uncomment the line later if you want to start using the application again.<P>
| <A NAME=MARKER-2-43> </A>Run adfs</B>:</B>:HardDisc4.$.Apps.!SciCalc<P>
<A NAME=HEADING5-71> </A>
<H2> <A NAME=MARKER-9-44> </A>Saving all of !Boot</H2>
<A NAME=MARKER-2-45> </A>!Boot is one of the most important applications on your computer. Without it your computer won't work correctly. Save a copy of !Boot before you start changing any configuration parameters within it (follow the directions given in <A HREF="../Book1b/C_2.HTM#HEADING2-95"><I>Backing up hard discs</I> on page 81</A>, but only copy !Boot itself).<P>
You could also make a copy of !Boot on the hard disc so that you can quickly copy back a working !Boot if you have problems. When you copy !Boot, give it a different name (for example, BootCopy) that does not begin with an exclamation mark. This ensures that the computer does not think it is an application. You can also restore the !Boot file to its factory default values using the <B><A NAME=MARKER-2-46> </A>!ResetBoot</B> application in the <B>Diversions</B> directory (but this will <B>not</B> restore a completely deleted !Boot file).<P>
<A NAME=HEADING5-74> </A>
<H2> Inside the !<A NAME=MARKER-2-47> </A>Boot application</H2>
<IMG SRC="PICS3/BO5IM151" WIDTH=27 HEIGHT=27>  This section is not essential reading. If you don't feel you need to know about the !Boot application, you can skip this section.<P>
!Boot is a collection of files and applications that are used to control the desktop. You won't need to know about all of them, just the few essential ones. The most important is the Desktop boot file, described earlier.<P>
The !Boot application contains the essential resource applications that most applications use; !System, !Scrap and <A NAME=MARKER-2-50> </A>!Fonts. It also contains the configuration application !<A NAME=MARKER-2-51> </A>Configure (this is what you actually see if you double-click on !Boot).<P>
<A NAME=HEADING5-78> </A>
<H3> The PreDesktop file</H3>
<IMG SRC="PICS3/BO5IM152" WIDTH=27 HEIGHT=27>  The PreDesktop file is used to configure the computer for particular purposes. You won't normally need to change any of the parameters in this file. However, if you do need to change the way your computer works, put any changes in this file. Examples of how to use this file are given in the file itself.<P>
The PreDesktop file has the following pathname</B>:<P>
<CODE>ADFS</B>:</B>:HardDisc4.$.!Boot.Choices.Boot.PreDesktop</CODE><P>
You can edit the PreDesktop file by loading it into Edit (Shift double-click). <P>
<A NAME=HEADING5-83> </A>
<H4> Aliases</H4>
This section is used for setting system <A NAME=MARKER-2-53> </A>aliases. This part of the file is only of use if you use the command line interface.<P>
<A NAME=HEADING5-85> </A>
<H4> Paths</H4>
This section of the file is used for defining standard <A NAME=MARKER-2-54> </A>paths and directories. It is only of use if you are programming.<P>
<A NAME=HEADING5-87> </A>
<H4> Options</H4>
A section for placing other options that may need to be set up.<P>
<A NAME=HEADING5-89> </A>
<H4> <A NAME=MARKER-9-55> </A>ResApps</H4>
This section registers applications with <A NAME=MARKER-2-56> </A>ResourceFS for display in Resources</B>:$.Apps (the Apps directory on the icon bar). The line in the file registers all the applications currently in the Apps directory on the hard disc. You can also add your own choices of application here using the AddApp command</B>:<P>
AddApp ADFS</B>:</B>:HardDisc4.$.Utilities.!ChangeFSI<P>
<A NAME=HEADING5-92> </A>
<H4> Misc</H4>
A section for placing additional instructions such as<P>
<UL>

<LI><A NAME=MARKER-2-57> </A>modules and sprite files to be loaded<P>

<LI>obey files to be <A NAME=MARKER-2-58> </A>run<P>

<LI>application directories whose !Run files are to be run.<P>
</UL>
<A NAME=HEADING5-97> </A>
<H3> Resource applications</H3>
Inside !Boot, there are three <A NAME=MARKER-2-59> </A>resource applications; these resources are used by the computer and by other applications to store essential information. However, you won't often use them directly in your everyday computing tasks.<P>
<A NAME=HEADING5-99> </A>
<H4> <A NAME=MARKER-2-60> </A>!System</H4>
<IMG SRC="PICS3/BO5IM153" WIDTH=27 HEIGHT=27>  !<A NAME=MARKER-2-61> </A>System is used to store new system modules (to replace or supplement existing parts of the operating system).<P>
You may need to add modules by hand because they are not supplied as part of a !System. The !System application can be found in <CODE>!Boot.Resources</CODE>. Copy the modules to the <CODE>Modules</CODE> directory within !System.<P>
When you buy more applications for your computer you may find that additional modules are supplied in the form of a !System application. The !System supplied with the application must be merged with the !System in the computer using the !Boot configuration application. See <A HREF=BOOK_4.HTM#MARKER-9-67>page 31</A> for more details.<P>
<A NAME=HEADING5-103> </A>
<H4> <A NAME=MARKER-2-62> </A>!Scrap</H4>
<IMG SRC="PICS3/BO5IM154" WIDTH=32 HEIGHT=30>  !<A NAME=MARKER-2-63> </A>Scrap is used to store temporary files. Applications often use temporary files during copying, printing and saving; these files are erased when they are no longer needed.<P>
<A NAME=HEADING5-105> </A>
<H4> <A NAME=MARKER-2-64> </A>!Fonts</H4>
<IMG SRC="PICS3/BO5IM155" WIDTH=27 HEIGHT=27>  !Fonts is used to store the fonts needed by the desktop and applications. If you have many fonts, !Boot may create additional !Fonts applications in which to store them.<P>
When you buy additional fonts, or applications that contain new fonts, you will find that the fonts are normally supplied in a !Fonts application. This !Fonts must be merged with the !Fonts in the computer. Use the !Boot configuration option to do this; see <A HREF=BOOK_4.HTM#MARKER-9-120>page 46</A> for more details.<P>
Similarly, you may need to add fonts by hand because they are not supplied as part of a !Fonts. The !Fonts application is in <CODE>!Boot.Resources</CODE>. Copy the new font directory into !Fonts.<P>
<A NAME=HEADING5-109> </A>
<H3> Other files in the !Boot application</H3>
<A NAME=HEADING5-110> </A>
<H4> <IMG SRC="PICS3/BO5IM156" WIDTH=27 HEIGHT=27>  Resources directory</H4>
This contains the resource applications !System, !Scrap and !Fonts and the configuration resource !Configure and its associated Configure directory. If you want to make sure that no one changes the computer's configuration, it is possible to remove the !Configure application from this directory. If you do this, double-clicking on !Boot give a message that you cannot configure the computer.<P>
<A NAME=HEADING5-112> </A>
<H4> <A NAME=MARKER-2-65> </A>Utils directory</H4>
This contains utilities used by the !Boot application.<P>
<A NAME=HEADING5-114> </A>
<H4> <A NAME=MARKER-2-66> </A>Library directory</H4>
This contains utilities used by the !Boot application that can also be used by other applications.<P>
<A NAME=HEADING5-116> </A>
<H4> <A NAME=MARKER-2-67> </A>Choices.Boot directory</H4>
This contains</B>:<P>
<UL>

<LI>The <A NAME=MARKER-2-68> </A>PreDesktop file already described. <P>

<LI>The <A NAME=MARKER-2-69> </A>Desktop file (used as a supplemental file for commands not put in the PreDesktop file). <P>

<LI>The <A NAME=MARKER-2-70> </A>PreDesk directory which contains desktop configuration information. This is executed before the Desktop starts.<P>

<LI>The <A NAME=MARKER-2-71> </A>Tasks directory which contains the Desktop boot file (called !Boot). It also contains other files to be executed after the Desktop starts.<P>
</UL>
<A NAME=HEADING5-122> </A>
<H4> </H4>
<!-- TOC -->
<HR>
<ADDRESS>RISC OS 3.7 User Guide - 21 JAN 1997</ADDRESS>
<A HREF="BOOK_6.HTM"><IMG ALIGN=BOTTOM SRC="next" WIDTH=69 HEIGHT=24>  </A> <A HREF="BOOK_4.HTM"><IMG ALIGN=BOTTOM SRC="prev" WIDTH=69 HEIGHT=24>  </A> <A HREF="USERGUIDE"><IMG ALIGN=BOTTOM SRC="top" WIDTH=69 HEIGHT=24>  </A> <A HREF="TOC.HTM"><IMG ALIGN=BOTTOM SRC="content" WIDTH=69 HEIGHT=24>  </A> <A HREF="../INDEX/MAIN.HTM"><IMG ALIGN=BOTTOM SRC="index" WIDTH=69 HEIGHT=24>  </A><P>

</BODY>
</HTML> 